<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ç¯®çƒåœºé¦†æ™ºèƒ½ç›‘æ§</title>
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cal+Sans:ital,wght@0,400;0,600;0,700&family=Noto+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
  <!-- Import Map -->
  <script type="importmap">
  {
    "imports": {
      "chart.js": "https://esm.sh/chart.js@4.4.1",
      "dayjs": "https://esm.sh/dayjs@1.11.11"
    }
  }
  </script>
</head>
<body>
  <header class="topbar" role="banner">
    <div class="brand">
      <span class="brand-mark" aria-hidden="true">ğŸ€</span>
      <span class="brand-name">ç¯®çƒåœºé¦†æ™ºèƒ½ç›‘æ§</span>
    </div>
    <div class="topbar-actions">
      <button id="simulateToggle" class="btn" aria-pressed="true">æš‚åœæ¨¡æ‹Ÿ</button>
      <button id="darkToggle" class="btn" aria-pressed="false">æš—è‰²æ¨¡å¼</button>
    </div>
  </header>

  <nav class="tabs" role="navigation" aria-label="ä¸»å¯¼èˆª">
    <button class="tab active" data-tab="overview"><span class="tab-label">æ€»è§ˆ</span></button>
    <button class="tab" data-tab="devices"><span class="tab-label">è®¾å¤‡</span><span class="tab-badge" id="badge-devices">0/0</span></button>
    <button class="tab" data-tab="schedule"><span class="tab-label">æ—¥ç¨‹</span><span class="tab-badge" id="badge-schedule">0</span></button>
    <button class="tab" data-tab="alerts"><span class="tab-label">æŠ¥è­¦</span><span class="tab-badge" id="badge-alerts">0</span></button>
    <button class="tab" data-tab="energy"><span class="tab-label">èƒ½è€—</span><span class="tab-badge" id="badge-energy">0</span></button>
    <button class="tab" data-tab="environment"><span class="tab-label">ç¯å¢ƒ</span><span class="tab-badge" id="badge-env">--</span></button>
    <button class="tab" data-tab="visitors"><span class="tab-label">è®¿å®¢</span><span class="tab-badge" id="badge-visitors">0</span></button>
    <button class="tab" data-tab="settings"><span class="tab-label">è®¾ç½®</span></button>
  </nav>

  <main class="container">
    <!-- æ€»è§ˆ -->
    <section id="tab-overview" class="tab-panel active" aria-label="æ€»è§ˆ">
      <div class="grid">
        <div class="card span-2">
          <div class="card-header">
            <h2>å®æ—¶çŠ¶æ€</h2>
            <span id="nowTime" class="muted"></span>
          </div>
          <div class="stats">
            <div class="stat">
              <div class="stat-label">åœ¨åœºäººæ•°</div>
              <div class="stat-value" id="totalPeople">0</div>
            </div>
            <div class="stat">
              <div class="stat-label">åœºåœ°å ç”¨</div>
              <div class="stat-value" id="courtUsage">0/4</div>
            </div>
            <div class="stat">
              <div class="stat-label">å¹³å‡æ¸©åº¦</div>
              <div class="stat-value" id="avgTemp">--Â°C</div>
            </div>
            <div class="stat">
              <div class="stat-label">ç©ºæ°”è´¨é‡</div>
              <div class="stat-value" id="aqi">ä¼˜</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>å ç”¨è¶‹åŠ¿</h2>
          </div>
          <canvas id="occupancyChart" aria-label="å ç”¨è¶‹åŠ¿å›¾" role="img"></canvas>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>åœºåœ°åˆ©ç”¨ç‡</h2>
          </div>
          <canvas id="utilChart" aria-label="åˆ©ç”¨ç‡æŸ±çŠ¶å›¾" role="img"></canvas>
        </div>

        <div class="card span-2">
          <div class="card-header">
            <h2>å®æ—¶ç”»é¢</h2>
            <div class="feeds-actions">
              <button class="btn ghost" id="refreshFeeds">åˆ·æ–°ç”»é¢</button>
            </div>
          </div>
          <div class="feeds">
            <figure class="feed">
              <img src="https://images.unsplash.com/photo-1519866663826-7e1967cbada1?q=80&w=1080&auto=format&fit=crop" alt="åœºåœ°Aæ‘„åƒå¤´å®æ—¶ç”»é¢">
              <figcaption>åœºåœ° A</figcaption>
            </figure>
            <figure class="feed">
              <img src="https://images.unsplash.com/photo-1483721310020-03333e577078?q=80&w=1080&auto=format&fit=crop" alt="åœºåœ°Bæ‘„åƒå¤´å®æ—¶ç”»é¢">
              <figcaption>åœºåœ° B</figcaption>
            </figure>
            <figure class="feed">
              <img src="https://images.unsplash.com/photo-1483721310020-03333e577078?q=80&w=1080&auto=format&fit=crop" alt="å…¥å£é€šé“æ‘„åƒå¤´">
              <figcaption>å…¥å£é€šé“</figcaption>
            </figure>
            <figure class="feed">
              <img src="https://images.unsplash.com/photo-1518020382113-a7e8fc38eac9?q=80&w=1080&auto=format&fit=crop" alt="çœ‹å°æ‘„åƒå¤´">
              <figcaption>çœ‹å°</figcaption>
            </figure>
          </div>
        </div>

        <div class="card span-2">
          <div class="card-header">
            <h2>åœºåœ°è¯¦æƒ…</h2>
          </div>
          <div class="courts">
            <div class="court" id="court-A">
              <div class="court-head">
                <span class="court-name">Aåœº</span>
                <span class="badge" data-status="idle">ç©ºé—²</span>
              </div>
              <div class="court-body">
                <div>äººæ•°ï¼š<span class="value people">0</span></div>
                <div>æ¸©åº¦ï¼š<span class="value temp">--Â°C</span></div>
                <div>æ¹¿åº¦ï¼š<span class="value humid">--%</span></div>
                <div>ç¯å…‰ï¼š<span class="value light">è‡ªåŠ¨</span></div>
              </div>
              <div class="court-actions">
                <button class="btn small" data-action="toggle-light" aria-controls="court-A">åˆ‡æ¢ç¯å…‰</button>
                <button class="btn small ghost" data-action="reserve" aria-controls="court-A">é¢„çº¦</button>
              </div>
            </div>
            <div class="court" id="court-B">
              <div class="court-head">
                <span class="court-name">Båœº</span>
                <span class="badge" data-status="busy">ä½¿ç”¨ä¸­</span>
              </div>
              <div class="court-body">
                <div>äººæ•°ï¼š<span class="value people">0</span></div>
                <div>æ¸©åº¦ï¼š<span class="value temp">--Â°C</span></div>
                <div>æ¹¿åº¦ï¼š<span class="value humid">--%</span></div>
                <div>ç¯å…‰ï¼š<span class="value light">è‡ªåŠ¨</span></div>
              </div>
              <div class="court-actions">
                <button class="btn small" data-action="toggle-light" aria-controls="court-B">åˆ‡æ¢ç¯å…‰</button>
                <button class="btn small ghost" data-action="reserve" aria-controls="court-B">é¢„çº¦</button>
              </div>
            </div>
            <div class="court" id="court-C">
              <div class="court-head">
                <span class="court-name">Cåœº</span>
                <span class="badge" data-status="idle">ç©ºé—²</span>
              </div>
              <div class="court-body">
                <div>äººæ•°ï¼š<span class="value people">0</span></div>
                <div>æ¸©åº¦ï¼š<span class="value temp">--Â°C</span></div>
                <div>æ¹¿åº¦ï¼š<span class="value humid">--%</span></div>
                <div>ç¯å…‰ï¼š<span class="value light">è‡ªåŠ¨</span></div>
              </div>
              <div class="court-actions">
                <button class="btn small" data-action="toggle-light" aria-controls="court-C">åˆ‡æ¢ç¯å…‰</button>
                <button class="btn small ghost" data-action="reserve" aria-controls="court-C">é¢„çº¦</button>
              </div>
            </div>
            <div class="court" id="court-D">
              <div class="court-head">
                <span class="court-name">Dåœº</span>
                <span class="badge" data-status="maintain">ç»´æŠ¤ä¸­</span>
              </div>
              <div class="court-body">
                <div>äººæ•°ï¼š<span class="value people">0</span></div>
                <div>æ¸©åº¦ï¼š<span class="value temp">--Â°C</span></div>
                <div>æ¹¿åº¦ï¼š<span class="value humid">--%</span></div>
                <div>ç¯å…‰ï¼š<span class="value light">å…³é—­</span></div>
              </div>
              <div class="court-actions">
                <button class="btn small" data-action="toggle-light" aria-controls="court-D">åˆ‡æ¢ç¯å…‰</button>
                <button class="btn small ghost" data-action="reserve" aria-controls="court-D" disabled>é¢„çº¦</button>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>æŠ¥è­¦</h2>
          </div>
          <ul id="alertList" class="list"></ul>
        </div>
      </div>
    </section>

    <!-- è®¾å¤‡ -->
    <section id="tab-devices" class="tab-panel" aria-label="è®¾å¤‡">
      <div class="card">
        <div class="card-header">
          <h2>è®¾å¤‡åœ¨çº¿ç‡</h2>
        </div>
        <div class="devices">
          <div class="device" data-total="8" data-online="7">
            <div class="device-name">æ‘„åƒå¤´ï¼ˆ8ï¼‰</div>
            <div class="device-status ok">7 åœ¨çº¿</div>
          </div>
          <div class="device" data-total="12" data-online="12">
            <div class="device-name">æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼ˆ12ï¼‰</div>
            <div class="device-status ok">12 åœ¨çº¿</div>
          </div>
          <div class="device" data-total="4" data-online="3">
            <div class="device-name">ç¯æ§æ¨¡å—ï¼ˆ4ï¼‰</div>
            <div class="device-status warn">3 åœ¨çº¿</div>
          </div>
        </div>
      </div>
    </section>

    <!-- æ—¥ç¨‹ -->
    <section id="tab-schedule" class="tab-panel" aria-label="æ—¥ç¨‹">
      <div class="card">
        <div class="card-header">
          <h2>ä»Šæ—¥å®‰æ’</h2>
          <button class="btn ghost" id="addSchedule">æ–°å»º</button>
        </div>
        <ul id="scheduleList" class="list"></ul>
      </div>
    </section>

    <!-- æŠ¥è­¦ -->
    <section id="tab-alerts" class="tab-panel" aria-label="æŠ¥è­¦">
      <div class="card">
        <div class="card-header">
          <h2>æŠ¥è­¦è®°å½•</h2>
          <button class="btn ghost" id="clearAlerts">æ¸…ç©º</button>
        </div>
        <ul id="alertHistory" class="list"></ul>
      </div>
    </section>

    <!-- èƒ½è€— -->
    <section id="tab-energy" class="tab-panel" aria-label="èƒ½è€—">
      <div class="card">
        <div class="card-header"><h2>ä»Šæ—¥èƒ½è€—ä¼°ç®—</h2></div>
        <ul class="list" id="energyList">
          <li><span>ç…§æ˜åŠŸç‡ï¼ˆä¼°ï¼‰</span><span class="tag">-- kW</span></li>
          <li><span>ç´¯è®¡ç”¨ç”µï¼ˆä¼°ï¼‰</span><span class="tag">-- kWh</span></li>
        </ul>
      </div>
    </section>

    <!-- ç¯å¢ƒ -->
    <section id="tab-environment" class="tab-panel" aria-label="ç¯å¢ƒ">
      <div class="card">
        <div class="card-header"><h2>ç¯å¢ƒæ¦‚è§ˆ</h2></div>
        <ul class="list" id="envList">
          <li><span>å¹³å‡æ¸©åº¦</span><span class="tag" id="envAvgTemp">--Â°C</span></li>
          <li><span>å¹³å‡æ¹¿åº¦</span><span class="tag" id="envAvgHumid">--%</span></li>
          <li><span>ç©ºæ°”è´¨é‡</span><span class="tag" id="envAQI">--</span></li>
        </ul>
      </div>
    </section>

    <!-- è®¿å®¢ -->
    <section id="tab-visitors" class="tab-panel" aria-label="è®¿å®¢">
      <div class="card">
        <div class="card-header"><h2>è®¿å®¢ç»Ÿè®¡</h2></div>
        <ul class="list" id="visitorsList">
          <li><span>å½“å‰åœ¨é¦†</span><span class="tag" id="visitorsNow">0</span></li>
          <li><span>ä»Šæ—¥ç´¯è®¡</span><span class="tag" id="visitorsToday">0</span></li>
        </ul>
      </div>
    </section>

    <!-- è®¾ç½® -->
    <section id="tab-settings" class="tab-panel" aria-label="è®¾ç½®">
      <div class="card">
        <div class="card-header"><h2>ç³»ç»Ÿè®¾ç½®</h2></div>
        <ul class="list">
          <li><span>æš—è‰²æ¨¡å¼</span><button class="btn small" id="settingsDark">åˆ‡æ¢</button></li>
          <li><span>æ¸…ç©ºæ•°æ®</span><button class="btn small ghost" id="settingsReset">é‡ç½®</button></li>
        </ul>
      </div>
    </section>
  </main>

  <footer class="footer" role="contentinfo">
    <span>Â© åœºé¦†æ™ºèƒ½ç›‘æ§</span>
    <span class="muted">æ¼”ç¤ºæ•°æ® Â· éçœŸå®ç›‘æ§</span>
  </footer>

  <script type="module" src="./app.js"></script>
</body>
</html>
<style>
:root {
  --bg: #f7fbff;
  --text: #081124;
  --muted: #6b7f91;
  --border: rgba(12,34,56,0.08);
  --accent: #36d1ff;
  --accent-2: #7b61ff;
  --ok: #28d08a;
  --warn: #ffb64d;
  --danger: #ff6b6b;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: "Cal Sans", "Noto Sans", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background: radial-gradient(1200px 600px at 10% 10%, rgba(54,209,255,0.06), transparent),
              radial-gradient(900px 400px at 90% 90%, rgba(123,97,255,0.04), transparent),
              var(--bg);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Topbar */
.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 20px; border-bottom: 1px solid var(--border);
}
.brand { display: flex; align-items: center; gap: 10px; font-weight: 700; }
.brand-mark { font-size: 20px; color: var(--accent); background: linear-gradient(90deg,var(--accent),var(--accent-2)); -webkit-background-clip: text; background-clip: text; filter: drop-shadow(0 8px 22px rgba(54,209,255,0.08)); }
.brand-name { font-size: 18px; letter-spacing: .6px; color: linear-gradient; }
.topbar { backdrop-filter: blur(6px) saturate(120%); background: rgba(255,255,255,0.04); border-bottom: 1px solid rgba(12,34,56,0.04); border-radius: 14px; padding: 18px 20px; }

/* Tabs */
.tabs { display: flex; gap: 8px; padding: 10px 20px; border-bottom: 1px solid var(--border); overflow-x: auto; }
.tab { flex: 0 0 auto; }
.tab {
  appearance: none; border: 1px solid transparent; background: rgba(255,255,255,0.03); color: var(--muted);
  padding: 8px 14px; border-radius: 999px; cursor: pointer; box-shadow: inset 0 -1px 0 rgba(12,34,56,0.02);
}
.tab.active { background: linear-gradient(90deg, rgba(54,209,255,0.12), rgba(123,97,255,0.06)); color: var(--accent); border-color: transparent; box-shadow: 0 6px 18px rgba(54,209,255,0.06); }
.tab:focus-visible { outline: 2px solid #000; outline-offset: 2px; }
.tab-badge {
  margin-left: 6px; padding: 2px 6px; border: 1px solid var(--border);
  border-radius: 999px; font-size: 12px; color: var(--muted); background: transparent;
}

/* Container & Grid */
.container { padding: 20px; max-width: 1200px; margin: 0 auto; }
.grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
@media (min-width: 1024px) { .grid { grid-template-columns: repeat(3, 1fr); } }
.span-2 { grid-column: span 2; }

/* Card */
.card {
  border: 1px solid var(--border);
  border-radius: 18px;
  overflow: hidden;
  background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.25));
  box-shadow: 0 8px 30px rgba(54,209,255,0.06), inset 0 1px 0 rgba(255,255,255,0.6);
  transition: transform .18s ease, box-shadow .18s ease;
}
.card:hover { transform: translateY(-6px) scale(1.006); box-shadow: 0 18px 40px rgba(54,209,255,0.08); }
.card-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; border-bottom: 1px solid var(--border); }
.card h2 { font-size: 16px; margin: 0; }

/* Stats */
.stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; padding: 12px; }
.stat { padding: 12px; border-radius: 14px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border: 1px solid rgba(12,34,56,0.03); }
.stat-label { font-size: 12px; color: var(--muted); }
.stat-value { color: linear-gradient; background: linear-gradient(90deg,var(--accent),var(--accent-2)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-family: "Cal Sans", ui-monospace, monospace; }

/* Feeds */
.feeds { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; padding: 12px; }
.feed { margin: 0; border: 1px solid var(--border); border-radius: 10px; overflow: hidden; }
.feed img { display: block; width: 100%; height: 160px; object-fit: cover; }
.feed figcaption { font-size: 12px; padding: 8px 10px; color: var(--muted); }

/* Courts */
.courts { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; padding: 12px; }
.court { border: 1px solid var(--border); border-radius: 10px; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
.court-head { display: flex; justify-content: space-between; align-items: center; }
.court-name { font-weight: 600; }
.badge { font-size: 12px; padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(12,34,56,0.04); background: rgba(255,255,255,0.02); box-shadow: inset 0 -6px 18px rgba(7,29,40,0.02); }
.badge[data-status="busy"] { color: #fff; background: linear-gradient(90deg,var(--accent-2),var(--accent)); border-color: transparent; box-shadow: 0 6px 20px rgba(123,97,255,0.08); }
.badge[data-status="idle"] { color: var(--muted); background: rgba(255,255,255,0.015); }
.badge[data-status="maintain"] { background: rgba(255,182,77,0.06); color: var(--warn); border-color: rgba(255,182,77,0.08); }
.court-body .value { font-weight: 600; }
.court-actions { display: flex; gap: 8px; }

/* Devices */
.devices { padding: 12px; display: grid; gap: 8px; }
.device { display: flex; justify-content: space-between; border: 1px dashed var(--border); border-radius: 8px; padding: 10px; }
.device-status.ok { color: var(--ok); }
.device-status.warn { color: var(--warn); }

/* Lists */
.list { list-style: none; margin: 0; padding: 10px; display: grid; gap: 8px; }
.list li { border: 1px solid var(--border); border-radius: 10px; padding: 10px; display: flex; justify-content: space-between; align-items: center; }
.list .tag { font-size: 12px; padding: 4px 6px; border: 1px solid var(--border); border-radius: 6px; }
.list .tag.warn { border-color: var(--warn); color: var(--warn); }
.list .tag.danger { border-color: var(--danger); color: var(--danger); }
</style>